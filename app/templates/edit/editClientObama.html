{% extends "dashboard/index.html" %}
{% load static %}
{% block head %}
    <title>Client Obamacare</title>
	<!--plugins-->
	<link href="{% static "assets/plugins/simplebar/css/simplebar.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/perfect-scrollbar/css/perfect-scrollbar.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/metismenu/css/metisMenu.min.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/datatable/css/dataTables.bootstrap5.min.css" %}" rel="stylesheet" />
	<link href="{% static "assets/plugins/bs-stepper/css/bs-stepper.css" %}" rel="stylesheet" />	
	<link href="{% static "assets/plugins/Drag-And-Drop/dist/imageuploadify.min.css" rel="stylesheet" %}" />
	<!-- loader-->
	<link href="{% static "assets/css/pace.min.css" %}" rel="stylesheet" />
	<script src="{% static "assets/js/pace.min.js" %}"></script>
	<script src="{% static 'assets/js/sessionTimeout.js' %}"></script>
	<!-- Bootstrap CSS -->
	<link href="{% static "assets/css/bootstrap.min.css" %}" rel="stylesheet">
	<link href="{% static "assets/css/bootstrap-extended.css" %}" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&amp;display=swap" rel="stylesheet">
	<link href="{% static "assets/css/app.css" %}" rel="stylesheet">
	<link href="{% static "assets/css/icons.css" %}" rel="stylesheet">
	<!-- Theme Style CSS -->
	<link rel="stylesheet" href="{% static "assets/css/dark-theme.css" %}" />
	<link rel="stylesheet" href="{% static "assets/css/semi-dark.css" %}" />
	<link rel="stylesheet" href="{% static "assets/css/header-colors.css" %}" />
	<!-- Choise Style CSS -->
	<link rel="stylesheet" href="{% static "assets/css/choiseFromEdit.css" %}" />

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">

	<!-- Estilos personalizados -->
	<style>
		.completed {
			background-color: rgb(0, 140, 255) !important;
			color: white !important;
		}
		.loader-overlay {
			position: fixed;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
			background: rgba(0, 0, 0, 0.5);
			display: flex;
			justify-content: center;
			align-items: center;
			flex-direction: column;
			color: white;
			font-size: 18px;
			z-index: 9999;
			display: none; /* Se oculta hasta que se haga submit */
		}

		.loader {
			border: 6px solid #f3f3f3;
			border-top: 6px solid #3498db;
			border-radius: 50%;
			width: 50px;
			height: 50px;
			animation: spin 1s linear infinite;
		}

		@keyframes spin {
			0% { transform: rotate(0deg); }
			100% { transform: rotate(360deg); }
		}

		.modal-content {
			border-radius: 10px;
			box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
		}

		.table td {
			font-weight: 450;
			color: #333;
		}

		/* Centrar la columna Option y moverla un poco a la derecha */
		.table th:nth-child(2), 
		.table td:nth-child(2) {
			text-align: center; /* Centra el texto y el switch */
			padding-left: 20px; /* Ajusta seg√∫n lo necesario */
		}

		
		
		
		
		

	</style>
	
{% endblock %}
{% block page_content %}
<h6 class="mb-0 text-uppercase">Client obamacare</h6>
<hr/>

<div id="stepper1" class="bs-stepper">
	<div class="card">
	  
	  	<div class="card-header">
		  	<div class="d-lg-flex flex-lg-row align-items-lg-center justify-content-lg-between" role="tablist">

				<div class="step" data-target="#test-l-1">
			
					<div class="step-trigger">

						<div class="bs-stepper-circle {% if letterCard.letters and letterCard.card %} completed {% endif %} ">
							<i class="fa-solid fa-file-signature"></i>
						</div>
						
						<div class="">
							<h5 class="mb-0 steper-title">L & C</h5>
						</div>
							
					</div>
				</div>

				<div class="bs-stepper-line"></div>

				<div class="step" >
					<div class="step-trigger" role="tab" id="stepper1trigger2" aria-controls="test-l-2">
						<div class="bs-stepper-circle {% if userCarrier.username_carrier != Null and userCarrier.username_carrier != 'None' and userCarrier.username_carrier != '' %} completed {% endif %} ">
							<i class="fa-solid fa-circle-user"></i>
						</div>
							<div class="">
								<h5 class="mb-0 steper-title">User Carrier</h5>
							</div>
					</div>
				</div>

				<div class="bs-stepper-line"></div>

				<div class="step" >
				<div class="step-trigger" role="tab" id="stepper1trigger2" aria-controls="test-l-2">
					<div class="bs-stepper-circle {% if obamacare.status == 'ACTIVE' %} completed {% endif %} " >
						<i class="fa-solid fa-circle-check"></i>
					</div>
						<div class="">
							<h5 class="mb-0 steper-title">Status</h5>
						</div>
					</div>
				</div>

				<div class="bs-stepper-line"></div>

				<div class="step" data-target="#test-l-3">
					<div class="step-trigger" role="tab" id="stepper1trigger3" aria-controls="test-l-3">
						<div class="bs-stepper-circle {% if obamacare.doc_income and obamacare.doc_migration%} completed {% endif %}">
							<i class="fa-solid fa-file-invoice"></i>
						</div>
						<div class="">
							<h5 class="mb-0 steper-title">Documents</h5>
						</div>
					</div>
				</div>

				<div class="bs-stepper-line"></div>

				<div class="step" data-target="#test-l-4">
					<div class="step-trigger" role="tab" id="stepper1trigger4" aria-controls="test-l-4">
						<div class="bs-stepper-circle {% if obamacare.policyNumber != '' and obamacare.policyNumber != Null and obamacare.policyNumber != 'None' %} completed {% endif %}">
							<i class="bi bi-123"></i>
						</div>
						<div class="">
							<h5 class="mb-0 steper-title">Policy Number</h5>
						</div>
					</div>
				</div>

				<div class="bs-stepper-line"></div>

				<div class="step" data-target="#test-l-4">
					<div class="step-trigger" role="tab" id="stepper1trigger4" aria-controls="test-l-4">
						<div class="bs-stepper-circle {% if apppointment %} completed {% endif %} ">
							<i class="fa-solid fa-user-doctor"></i>
						</div>
						<div class="">
							<h5 class="mb-0 steper-title">Appointment</h5>
						</div>
					</div>
				</div>
				
			</div>

			<hr>

			<div class="progress">
				<div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="{{percentage}}" aria-valuemin="0" aria-valuemax="100" style="width: {{percentage}}%">{{percentage}}%</div>
			</div>

	  	</div>
	  
	</div>
</div>

<div class="row">
    <div class="col-xl-10 mx-auto">
        <div class="card">
            <div class="card-body p-4">
                <form class="row g-3 needs-validation" method="POST" Action="{% url 'editClientObama' obamacare.id  %}">
                    <h4>Client</h4>						
						<div class="col-12 col-lg-4">
							<label for="first_name" class="form-label">First Name</label>
							<input type="text" class="form-control" name="first_name" id="first_name" placeholder="First Name" value="{{obamacare.client.first_name}}" required>
							<input class="form-control" hidden name="id_client" id="id_client"  value="{{obamacare.client.id}}">
						</div>
						<div class="col-12 col-lg-4">
							<label for="last_name" class="form-label">Last Name</label>
							<input type="text" class="form-control" name="last_name" id="last_name" placeholder="Last Name" value="{{obamacare.client.last_name}}" required>
						</div>
						<div class="col-12 col-lg-4">
							<label for="phone_number" class="form-label">Phone Number</label>
							<input type="number" class="form-control" name ="phone_number" id="phone_number" placeholder="Phone Number" value="{{obamacare.client.phone_number}}" required>
						</div>
						<div class="col-12 col-lg-3">
							<label for="email" class="form-label">E-mail Address</label>
							<input type="email" class="form-control" name="email" id="email" placeholder="Enter Email Address" value="{{obamacare.client.email}}" required>
						</div>
						<div class="col-12 col-lg-3">
							<label for="address" class="form-label">Address</label>
							<input type="text" class="form-control" name="address" id="address" placeholder="Address" value="{{obamacare.client.address}}" required>
						</div>
						<div class="col-12 col-lg-2">
							<label for="zipcode" class="form-label">zipCode</label>
							<input type="text" maxlength="5" oninput="this.value = this.value.replace(/[^0-9]/g, '')" class="form-control" name ="zipcode" id="zipcode" value="{{obamacare.client.zipcode}}" required>
						</div>
						<div class="col-12 col-lg-2">
							<label for="city" class="form-label">City</label>
							<input type="text" class="form-control" name ="city" id="city" value="{{obamacare.client.city}}" readonly required>
						</div>
						<div class="col-12 col-lg-2">
							<label for="state" class="form-label font-weight-bold">State</label>
							<input type="text" class="form-control" name ="state" id="state" value="{{obamacare.client.state}}" readonly required>
						</div>
						<div class="col-12 col-lg-3">
							<label for="county" class="form-label">County</label>
							<input type="text" class="form-control" name ="county" id="county" value="{{obamacare.client.county}}" readonly required>
						</div>
						<div class="col-12 col-lg-2">
							<label for="sex" class="form-label">Sex</label>
							<select class="form-select"  name="sex" id="sex" aria-label="Default select example" required>
								<option value="" disabled selected>Please Select</option>
								<option value="M" {% if obamacare.client.sex == "M" %}selected{% endif %} >MALE</option>
								<option value="F" {% if obamacare.client.sex == "F" %}selected{% endif %} >FEMALE</option>
							</select>
						</div>
						<div class="col-12 col-lg-1">
							<label for="old" class="form-label">Age</label>
							<input type="number" class="form-control" name ="old" id="old" placeholder="Old" value="{{obamacare.client.old}}" readonly required>
						</div>
						<div class="col-12 col-lg-3">
							<label for="date_birth" class="form-label">Date Birth</label>
							<input type="text" class="form-control" name="date_birth" id="date_birth" value="{{ obamacare.client.date_birth|date:'m/d/Y' }}" required>
						</div>
						<div class="col-12 col-lg-2">
							<label for="date_effective_coverage_end" class="form-label">Social Security</label>
							<input type="text" class="form-control" name="social_security" id="social_security" value="{{formatted_social}}" disabled >
						</div>  
						<div class="col-12 col-lg-1">
							<br>							
							<button id="show-full-social" type="button" class="btn btn-secondary mt-2 "><i class="lni lni-eye"></i></button>
							<button hidden type="button" id="block-social" class="btn btn-secondary mt-2">Bloquear N√∫mero</button>
						</div>  
						<div class="col-12 col-lg-5">
							<label for="migration_status" class="form-label">Migration Status</label>
							<select class="form-select" id="migration_status"  name="migration_status" required  >
								<option value="" disabled selected>Please Select</option>
								<option value="EMPLOYMENT AUTHORIZATION" {% if obamacare.client.migration_status == "EMPLOYMENT AUTHORIZATION" %}selected{% endif %} >Employment Authorization</option>
								<option value="NOTICE OF ACTION" {% if obamacare.client.migration_status == "NOTICE OF ACTION" %}selected{% endif %} >Notice of Action (i-797)</option>
								<option value="REFUGEE" {% if obamacare.client.migration_status == "REFUGEE" %}selected{% endif %} >Refugee</option>
								<option value="ASYLUM" {% if obamacare.client.migration_status == "ASYLUM" %}selected{% endif %} >Asylum</option>
								<option value="TPS" {% if obamacare.client.migration_status == "TPS" %}selected{% endif %} >Temporary Protection Status (TPS)</option>
								<option value="DOMESTIC VIOLENCE" {% if obamacare.client.migration_status == "DOMESTIC VIOLENCE" %}selected{% endif %} >Domestic Violence</option>
								<option value="PERMANENT RESIDENT" {% if obamacare.client.migration_status == "PERMANENT RESIDENT" %}selected{% endif %} >Permanent Resident (Green Card)</option>
								<option value="CONDITIONAL RESIDENT" {% if obamacare.client.migration_status == "CONDITIONAL RESIDENT" %}selected{% endif %} >Conditional Resident</option>
								<option value="PAROLE" {% if obamacare.client.migration_status == "PAROLE" %}selected{% endif %} >Parole</option>
								<option value="US CITIZEN" {% if obamacare.client.migration_status == "US CITIZEN" %}selected{% endif %} >US Citizen (Driver's License)</option>
								<option value="STUDENT VISA" {% if obamacare.client.migration_status == "STUDENT VISA" %}selected{% endif %} >Student Visa (I-20)</option>
								<option value="CURRENTLY IN PROCESS" {% if obamacare.client.migration_status == "CURRENTLY IN PROCESS" %}selected{% endif %} >Currently In Process (this means the client received an i-797)</option>
							</select>
						</div>
						<div class="col-12 col-lg-2">
							<label for="apply" class="form-label">Apply</label>
							<select class="form-select" id="apply"  name="apply" required>
								<option value="" disabled selected>Please Select</option>
								<option value = True {% if obamacare.client.apply == True %}selected{% endif %} >SI</option>
								<option value = False {% if obamacare.client.apply == False %}selected{% endif %} >NO</option>
							</select>
						</div>
						<div class="col-12 col-lg-5">
							<label for="agent_usa" class="form-label font-weight-bold">Agente USA</label>
							<select class="form-select" id="agent_usa" aria-label="Default select example" name="agent_usa" required >
								<option value="" disabled selected>Please Select</option>
								<option {% if obamacare.client.agent_usa == "GINA PAOLA LAPEIRA - NPN 19944280" %}selected{% endif %} value="GINA PAOLA LAPEIRA - NPN 19944280">GINA PAOLA LAPEIRA - NPN 19944280</option>
								<option {% if obamacare.client.agent_usa == "LUIS EDUARDO LAPEIRA - NPN 20556081" %}selected{% endif %} value="LUIS EDUARDO LAPEIRA - NPN 20556081">LUIS EDUARDO LAPEIRA - NPN 20556081</option>
							</select>
						</div>
						
						<hr>
						{% if dependents %}
							<h4>Dependents</h4>
						{% endif %}
                    
                    {% for dependent in dependents %}
						<div class="col-12 col-lg-6">
							<label class="form-label">Name of Dependent #{{ forloop.counter }}</label>
							<input type="hidden" name="dependentId_{{ dependent.id }}" value="{{ dependent.id }}">
							<input type="text" class="form-control" name="nameDependent_{{ dependent.id }}" value="{{ dependent.name }}" required >
						</div>
						<div class="col-12 col-lg-2">
							<label class="form-label">Apply</label>
							<select class="form-select" name="applyDependent_{{ dependent.id }}" required>
								<option value="" disabled selected>Please Select</option>
								<option value="YES" {% if dependent.apply == "YES" %}selected{% endif %}>YES</option>
								<option value="NO" {% if dependent.apply == "NO" %}selected{% endif %}>NO</option>
							</select>
						</div>
						<div class="col-12 col-lg-4">
							<label class="form-label">Sex</label>
							<select class="form-select" name="sexDependent_{{ dependent.id }}" required>
								<option value="" disabled selected>Please Select</option>
								<option value="M" {% if dependent.sex == "M" %}selected{% endif %}>MALE</option>
								<option value="F" {% if dependent.sex == "F" %}selected{% endif %}>FEMALE</option>
							</select>
						</div>
						<div class="col-12 col-lg-3">
							<label for="kinship" class="form-label">Relationship</label>
							<select class="form-select" id="kinship" name="kinship_{{ dependent.id }}" aria-label="Default select example">
								<option value="" disabled selected>Please Select</option>
								<option value="DAD" {% if dependent.kinship == 'DAD' %}selected{% endif %}>DAD</option>
								<option value="MOM" {% if dependent.kinship == 'MOM' %}selected{% endif %}>MOM</option>
								<option value="SON" {% if dependent.kinship == 'SON' %}selected{% endif %}>SON</option>
								<option value="GRANDPARENT" {% if dependent.kinship == 'GRANDPARENT' %}selected{% endif %}>GRANDPARENT</option>
								<option value="GRANDMOTHER" {% if dependent.kinship == 'GRANDMOTHER' %}selected{% endif %}>GRANDMOTHER</option>
								<option value="COUPLE" {% if dependent.kinship == 'COUPLE' %}selected{% endif %}>COUPLE</option>
							</select>
						</div>
						<div class="col-12 col-lg-3">
							<label class="form-label">Date Birth</label>
							<input type="text" class="form-control" id="dateBirthDependent"  name="dateBirthDependent_{{ dependent.id }}"  value="{{ dependent.date_birth|date:'m/d/Y' }}" >
						</div>
						<div class="col-12 col-lg-6">
							<label class="form-label">Migration Status</label>
							<select class="form-select" name="migrationStatusDependent_{{ dependent.id }}" required >		
								<option value="" disabled selected>Please Select</option>
								<option value="EMPLOYMENT AUTHORIZATION" {% if dependent.migration_status == "EMPLOYMENT AUTHORIZATION" %}selected{% endif %} >Employment Authorization</option>
								<option value="NOTICE OF ACTION" {% if dependent.migration_status == "NOTICE OF ACTION" %}selected{% endif %} >Notice of Action (i-797)</option>
								<option value="REFUGEE" {% if dependent.migration_status == "REFUGEE" %}selected{% endif %} >Refugee</option>
								<option value="ASYLUM" {% if dependent.migration_status == "ASYLUM" %}selected{% endif %} >Asylum</option>
								<option value="TPS" {% if dependent.migration_status == "TPS" %}selected{% endif %} >Temporary Protection Status (TPS)</option>
								<option value="DOMESTIC VIOLENCE" {% if dependent.migration_status == "DOMESTIC VIOLENCE" %}selected{% endif %} >Domestic Violence</option>
								<option value="PERMANENT RESIDENT" {% if dependent.migration_status == "PERMANENT RESIDENT" %}selected{% endif %} >Permanent Resident (Green Card)</option>
								<option value="CONDITIONAL RESIDENT" {% if dependent.migration_status  == "CONDITIONAL RESIDENT" %}selected{% endif %} >Conditional Resident</option>
								<option value="PAROLE" {% if  dependent.migration_status == "PAROLE" %}selected{% endif %} >Parole</option>
								<option value="US CITIZEN" {% if  dependent.migration_status == "US CITIZEN" %}selected{% endif %} >US Citizen (Driver's License)</option>
								<option value="STUDENT VISA" {% if  dependent.migration_status == "STUDENT VISA" %}selected{% endif %} >Student Visa (I-20)</option>
								<option value="CURRENTLY IN PROCESS" {% if  dependent.migration_status == "CURRENTLY IN PROCESS" %}selected{% endif %} >Currently In Process (this means the client received an i-797)</option>
							</select>
						</div>
					<hr>
					{% endfor %}

                    <H4>Plan</H4>
						<div class="col-12 col-lg-6">
							<label for="agent_usa_obamacare" class="form-label font-weight-bold">Agente USA</label>
							<select class="form-select" id="agent_usa_obamacare" aria-label="Default select example" name="agent_usa_obamacare">
								<option value="no_valid">Please Select</option>
								<option {% if obamacare.agent_usa == 'GINA PAOLA LAPEIRA - NPN 19944280' %}selected{% endif %} value="GINA PAOLA LAPEIRA - NPN 19944280">GINA PAOLA LAPEIRA - NPN 19944280</option>
								<option {% if obamacare.agent_usa == 'LUIS EDUARDO LAPEIRA - NPN 20556081' %}selected{% endif %} value="LUIS EDUARDO LAPEIRA - NPN 20556081">LUIS EDUARDO LAPEIRA - NPN 20556081</option>
							</select>
						</div>
						<div class="col-12 col-lg-2">
							<label for="taxes" class="form-label">Taxes</label>
							<input type="number" class="form-control" id="taxes" name="taxes" value="{{ obamacare.taxes }}" required >
						</div>
						<div class="col-12 col-lg-4">
							<label for="carrierObama" class="form-label">Carrier</label>
							<select class="form-select" id="carrierObama"  name="carrierObama" required  >
								<option value="" disabled selected>Please Select</option>
								<option value="AETNA" {% if obamacare.carrier == "AETNA" %}selected{% endif %} >AETNA</option>
								<option value="AMBETTER" {% if obamacare.carrier == "AMBETTER" %}selected{% endif %} >AMBETTER</option>
								<option value="ANTHEM" {% if obamacare.carrier == "ANTHEM" %}selected{% endif %} >ANTHEM</option>
								<option value="AVMED" {% if obamacare.carrier == "AVMED" %}selected{% endif %} >AVMED</option>
								<option value="BLUE CROSS" {% if obamacare.carrier == "BLUE CROSS" %}selected{% endif %} >BLUE CROSS</option>
								<option value="BRIGHT" {% if obamacare.carrier == "BRIGHT" %}selected{% endif %} >BRIGHT</option>
								<option value="CARE SOURCE" {% if obamacare.carrier == "CARE SOURCE" %}selected{% endif %} >CARE SOURCE</option>
								<option value="CIGNA" {% if obamacare.carrier == "CIGNA" %}selected{% endif %} >CIGNA</option>
								<option value="FLORIDA BLUE" {% if obamacare.carrier == "FLORIDA BLUE" %}selected{% endif %} >FLORIDA BLUE</option>
								<option value="FRIDAY" {% if obamacare.carrier == "FRIDAY" %}selected{% endif %} >FRIDAY</option>
								<option value="MEDICA" {% if obamacare.carrier == "MEDICA" %}selected{% endif %} >MEDICA</option>
								<option value="MOLINA" {% if obamacare.carrier == "MOLINA" %}selected{% endif %} >MOLINA</option>
								<option value="OSCAR" {% if obamacare.carrier == "OSCAR" %}selected{% endif %} >OSCAR</option>
								<option value="UNITED" {% if obamacare.carrier == "UNITED" %}selected{% endif %} >UNITED</option>
								<option value="CHRISTUS HEALTH" {% if obamacare.carrier == "CHRISTUS HEALTH" %}selected{% endif %} >CHRISTUS HEALTH</option>
								<option value="US HEALTH AND LIFE" {% if obamacare.carrier == "US HEALTH AND LIFE" %}selected{% endif %} >US HEALTH AND LIFE</option>
								<option value="MODA" {% if obamacare.carrier == "MODA" %}selected{% endif %} >MODA</option>
								<option value="PROVIDENCE" {% if obamacare.carrier == "PROVIDENCE" %}selected{% endif %} >PROVIDENCE</option>
								<option value="AERIHEALTH CARITAS" {% if obamacare.carrier == "AERIHEALTH CARITAS" %}selected{% endif %} >AERIHEALTH CARITAS</option>
								<option value="HEALTH FRIST" {% if obamacare.carrier == "HEALTH FRIST" %}selected{% endif %} >HEALTH FRIST</option>
								<option value="WELLPOINT" {% if obamacare.carrier == "WELLPOINT" %}selected{% endif %} >WELLPOINT</option>
							</select>
						</div>
						<div class="col-12 col-lg-2">
							<label for="work" class="form-label font-weight-bold">Work</label>
							<select class="form-select" id="work" aria-label="Default select example"  name="work" required  >
								<option value="" disabled selected>Please Select</option>
								<option value="W2" {% if obamacare.work == "W2" %}selected{% endif %} >W2</option>
								<option value="1099"{% if obamacare.work == "1099"%}selected{% endif %} >1099</option> 
							</select>
						</div>
						<div class="col-12 col-lg-2">
							<label for="subsidy" class="form-label">Subsidy</label>
							<input type="number" step="0.00" class="form-control" id="subsidy" name="subsidy" value="{{ obamacare.subsidy }}" >
						</div>
						<div class="col-12 col-lg-2">
							<label for="ffm" class="form-label">FFM</label>
							<input type="number" class="form-control" id="ffm" name="ffm" value="{{obamacare.ffm}}" >
						</div>
						<div class="col-12 col-lg-2">
							<label for="required_bearing" class="form-label">Bearing</label>
							<select class="form-select" id="required_bearing" aria-label="Default select example"  name="required_bearing"   >
								<option value="" disabled selected>Please Select</option>
								<option value=1 {% if obamacare.required_bearing == 1 %}selected{% endif %}>YES</option>
								<option value=0 {% if obamacare.required_bearing == 0 %}selected{% endif %}>NO</option> 
							</select>
						</div>                    
						<div class="col-12 col-lg-2">
							<label for="date_bearing" class="form-label">Bearing Date</label>
							<input type="text" class="form-control" name="date_bearing" id="date_bearing" value="{{obamacare.date_bearing|date:'m/d/Y'}}" >
						</div>
						<div class="col-12 col-lg-2">
							<label for="doc_income" class="form-label">Income Doc</label>
							<select class="form-select" id="doc_income"  name="doc_income" required  >
								<option value ="" disabled selected>Please Select</option>
								<option value = True {% if obamacare.doc_income == True %}selected{% endif %} >YES</option>
								<option value = False {% if obamacare.doc_income == False %}selected{% endif %} >NO</option>
							</select>
						</div>
						<div class="col-12 col-lg-2">
							<label for="doc_migration" class="form-label">Inmigration Doc</label>
							<select class="form-select" id="doc_migration"  name="doc_migration" required  >
								<option value="" disabled selected>Please Select</option>
								<option value = True {% if obamacare.doc_migration == True %}selected{% endif %} >YES</option>
								<option value = False {% if obamacare.doc_migration == False %}selected{% endif %} >NO</option>
							</select>
						</div>						
						<div class="col-12 col-lg-4">
							<label for="planName" class="form-label">Plan Name</label>
							<input type="text" class="form-control" id="planName" name="planName" value="{{ obamacare.plan_name }}" required  >
						</div>
						<div class="col-12 col-lg-3">
							<label for="premium" class="form-label">Premium</label>
							<input type="number" step="0.00" class="form-control" id="premium" name="premium" value="{{ obamacare.premium }}" step="0.00" required >
						</div>
						<div class="col-12 col-lg-3">
							<label for="policyNumber" class="form-label">Police Number</label>
							<input type="text" class="form-control" id="policyNumber" name="policyNumber" value="{{ obamacare.policyNumber }}" >
						</div>
						<div class="col-12 col-lg-3">
							<label for="profiling" class="form-label">Enrolled by</label>
							<select required class="form-select" id="profiling"  name="profiling" {% for user in users %}{% if obamacare.profiling == user.first_name|stringformat:"s"|add:" "|add:user.last_name %}disabled{% endif %}{% endfor %}> 
								<option value="" disabled selected>Please Select</option>
								<option value="NO" {% if obamacare.profiling == "NO" %}selected{% endif %}>NO</option>                           
								{% for user in users %}
									<option value="{{ user.first_name }} {{ user.last_name }}" {% if obamacare.profiling == user.first_name|stringformat:"s"|add:" "|add:user.last_name %}selected{% endif %}>{{ user.first_name }} {{ user.last_name }}</option>                 
								{% endfor %}
							</select>
						</div>
						<div class="col-12 col-lg-3">
							<label for="statusObama" class="form-label">Status</label>
							<select required class="form-select" id="statusObama"  name="statusObama" required >
								<option value="" disabled selected>Please Select</option>					
								{% for  list_drow in list_drow %}
									<option value="{{list_drow.profiling_obama}}" {% if obamacare.status == list_drow.profiling_obama %}selected{% endif %} >{{list_drow.profiling_obama}}</option>                      
								{% endfor %}
							</select>
						</div>
						{% if request.user.role != 'A' %}
						<div class="col-12 col-lg-3">
							<label for="usernameCarrier" class="form-label">Username Carrier</label>
							<input type="text" hidden name="usernameCarrierID" id="usernameCarrierID" value="{{userCarrier.id}}" >
							<input type="text" {% if userCarrier.username_carrier %} readonly {% endif %} class="form-control" name="usernameCarrier" id="usernameCarrier" value="{{userCarrier.username_carrier}}" >
						</div>
						<div class="col-12 col-lg-3">
							<label for="passwordCarrier" class="form-label">Password Carrier</label>
							<input type="text" class="form-control" {% if userCarrier.password_carrier %} readonly {% endif %} name="passwordCarrier" id="passwordCarrier" value="{{userCarrier.password_carrier}}" >
						</div>   
						<div class="col-12 col-lg-3">
							<label for="letters" class="form-label">Health market letters</label>
							<input type="text" hidden name="letterCardID" id="letterCardID" value="{{letterCard.id}}">
							{% if letterCard.letters %}
								<input type="text" class="form-control" readonly name="letters" id="letters" value="YES">
							{% else %}
								<select class="form-select" id="letters"  name="letters" required  >
									<option value="" disabled selected>Please Select</option>
									<option value = "True" {% if letterCard.letters %}selected{% endif %} >YES</option>
									<option value = "False" {% if not letterCard.letters %}selected{% endif %} >NO</option>
								</select>
							{% endif %}
						</div>   
						<div class="col-12 col-lg-3">
							<label for="cards" class="form-label">Health Market Cards</label>
							{% if letterCard.card %}
								<input type="text" class="form-control" readonly name="card" id="card" value="YES">
							{% else %}
								<select class="form-select" id="cards"  name="cards" required  >
									<option value="" disabled selected>Please Select</option>
									<option value = "True" {% if letterCard.card  %}selected{% endif %} >YES</option>
									<option value = "False" {% if not letterCard.card %}selected{% endif %} >NO</option>
								</select>
							{% endif %}
							
						</div>   
						{% endif %}
						<div class="col-12 col-lg-3">
							<label for="date_effective_coverage" class="form-label">Date Effective Coverage</label>
							<input type="text" class="form-control" name="date_effective_coverage" id="date_effective_coverage" value="{{obamacare.date_effective_coverage|date:'m/d/Y'}}" >
						</div>
						<div class="col-12 col-lg-3">
							<label for="date_effective_coverage_end" class="form-label">Date Effective Coverage End</label>
							<input type="text" class="form-control" name="date_effective_coverage_end" id="date_effective_coverage_end" value="{{obamacare.date_effective_coverage_end|date:'m/d/Y'}}" >
						</div>   	       
						<div class="col-12 col-lg-6">
							<label for="observationObama" class="form-label">Observation</label>
							<textarea class="form-control" id="observationObama" name="observationObama" rows="3"  style="resize: none">{{ obamacare.observation }}</textarea>
						</div>
						<div class="col-12 col-lg-6">
							<label for="observationObama" class="form-label">Observation Agent</label>
							<textarea class="form-control" id="observationObama" name="observationObama" disabled rows="3"  style="resize: none">{{ obsObamaText }}</textarea>
						</div>
						{% if request.user.role == 'A' %}
						<div class="col-12 col-lg-6" id="obs_agent">
							<label for="obs_agent" class="form-label">OBS. AGENT</label>
							<input type="text" class="form-control" id="obs_agent" name="obs_agent"  >
						</div> 
						{% endif %}
						<hr>					            
						<div class="col-md-12">
							<div class="d-md-flex d-grid align-items-center gap-3">
								<button type="submit" name="action" value="save_obamacare" id="enviar" class="btn btn-primary px-4"  >Submit</button>
								<button type="submit" name="action" id="enviar2" value="save_observation_agent" class="btn btn-primary px-4" style="display: none;">Submits</button>
								<a href="{% url 'clientObamacare' %}" class="btn btn-light px-4">Back</a>
								{% if request.user.role != 'A' %}
									<a class="btn btn-light px-4" data-bs-toggle="modal" data-bs-target="#verConsent">View Consent</a>
									<a class="btn btn-light px-4" data-bs-toggle="modal" data-bs-target="#verIncomeLetter">View Income Letter</a>
									<a class="btn btn-light px-4" data-bs-toggle="modal" data-bs-target="#verDocument">View Document</a>
									<a class="btn btn-light px-4" data-bs-toggle="modal" data-bs-target="#verAppointment">View Appointment</a>
								{% endif %}
							</div>
						</div>
                    {% csrf_token %}	
                </form>
				<hr>

				<div id="password-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000;">
					<div style=" padding: 20px; max-width: 400px; margin: 100px auto; border-radius: 8px; text-align: center;">
						<h3>Ingresa la clave</h3>
						<input type="password" id="password-input" class="form-control" placeholder="Clave" style="margin: 10px 0; width: 100%;">
						<button id="submit-password" class="btn btn-primary">Enviar</button>
						<button id="cancel-password" class="btn btn-secondary">Cancelar</button>
					</div>
				</div>
				
				
				<h5>Customer Departament:</h5>
				<div class="col-12 col-lg-12">

					<div class="row row-cols-auto g-3">

						<!-- Botones para abrir los modales -->
						{% if request.user.role != 'A' %}
							<button type="button" class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#modalIngresarTexto">
								Enter Observation
							</button>
							<button type="button" class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#modalDocument">
								Enter Documents
							</button>
							<button type="button" class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#modalAppointment">
								Enter Appointment
							</button>
							<button type="button" class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#modalPayments">
								Enter Payments
							</button>
							<button type="button" class="btn btn-primary me-2" data-bs-toggle="modal" data-bs-target="#modalPayments">
								Enter Payments
							</button>
						{% endif %} 
						<button type="button" class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#modalVerTexto">
							See Observations
						</button>
						
					</div>
			
					<!-- Modal para ingresar texto -->
					<div class="modal fade" id="modalIngresarTexto" tabindex="-1" aria-labelledby="modalIngresarTextoLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="modalIngresarTextoLabel">Enter Observation</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									<form id="formIngresarTexto" action="{% url 'saveCustomerObservationACA' %}" method="POST">
										{% csrf_token %}
										<input type="hidden" name="plan_id" value="{{ obamacare.id }}">
										<input type="hidden" name="type_plan" value="ACA">
										<div class="mb-3">
											<label for="textoIngresado" class="form-label">Text:</label>
											<textarea class="form-control" id="textoIngresado" name="textoIngresado" rows="4" required></textarea>
										</div>
										<div class="mb-3">
											<label for="textoIngresado" class="form-label">Typification:</label>
											<select class="form-select"  name="observaciones[]" id="textoIngresados" multiple required>
												<option value="1095-A">1095-A</option>
												<option value="AUDITED">Audited</option>
												<option value="ACTIVE">Active</option>
												<option value="CANCEL">Cancel</option>
												<option value="PLAN CHANGE">Plan Change</option>
												<option value="AGENT CHANGE">Agent Change</option>
												<option value="T/C CHANGE">T/C Change</option>
												<option value="CARRIER">Carrier</option>
												<option value="APPOINTMENTS">Appointments</option>
												<option value="SATISFIED CUSTOMER">Satisfied Customer</option>
												<option value="CORRECTION">Correction</option>
												<option value="PAYMENT ERROR CORRECTION">Payment Error Correction</option>
												<option value="PORTAL CREATION">Portal/Member ID/Brochure Creation</option>
												<option value="DEMOGRAPHIC DATA">Demographic Data</option>
												<option value="DOCUMENTS IN SHERPA">Documents in Sherpa</option>
												<option value="DOCUMENTS RECEIVED">Documents Received</option>
												<option value="ID CARD SEND">ID Card Send</option>
												<option value="DENTIST LISTING">Dentist listing</option>
												<option value="OPTOMETER LISTING">Optometer Listing</option>
												<option value="PLAN EXPLANATION">Plan Explanation</option>
												<option value="OUT OF SERVICE">Out of Service</option>
												<option value="HEALTHSAFE ID">HEALTHSAFE ID</option>
												<option value="ID MEMBER">ID Member</option>
												<option value="ID SUPERVISOR">ID Supervisor</option>
												<option value="CARRIER SUP CALL">Carrier Supervisor Call</option>
												<option value="EFFECTIVE MANAGEMENT">Effective Management</option>
												<option value="WELCOME MESSAGE">Welcome Message</option>
												<option value="FOLLOW-UP CALL">Follow-up call</option>
												<option value="INFORMATIVE MESSAGE">Informative Message</option>
												<option value="MARKET CALL">Market Call</option>
												<option value="NO ANSWER">No Answer</option>
												<option value="OTHER PARTY">Other Party</option>
												<option value="DENTAL PAYMENT UHC">Dental Payment via UHC</option>
												<option value="VISION PAYMENT UHC">Vision Payment via UHC</option>
												<option value="CARRIER ACA PORTAL">Carrier ACA Portal</option>
												<option value="CARD RECEIPT">Card Receipt</option>
												<option value="RECOVERED">Recovered</option>
												<option value="REFERAL">Referal</option>
												<option value="ROLLED OVER">Rolled Over</option>
												<option value="PREMIUM PAYMENT">Premium Payment</option>
												<option value="PCP">PCP</option>
												<option value="REQUEST DOCUMENTS">Request Documents</option>
												<option value="SUPPLEMENTARY">Supplemental</option>
												<option value="TRANSFER">Transfer</option>
												<option value="UHC ID READY">UHC ID Ready</option>
												<option value="CALL BACK">Call Back</option>
												<option value="INFORMATIVE CALLS ACA SUP">Informative Calls ACA/Supplementaries</option>
												<option value="HANGS UP">Hangs Up</option>
											</select>
										</div>
										<div class="mb-3">
											<label for="textoIngresado" class="form-label">Typification the Call:</label>
											<select class="form-select"  name="typeCall" >
												<option></option>
												<option value="INBOUND" >Inbound </option>
												<option value="OUTBOUND" >Outbound </option>
												<option value="WHATSAPP" >WhatsApp</option>
												<option value="TXT MESSAGE" >Txt Message</option>
												<option value="SHERPA" >Sherpa</option>
											</select>
										</div>
										<button type="submit" class="btn btn-primary">Guardar</button>
									</form>
									
								</div>
							</div>
						</div>
					</div>

					<!-- Modal para ingresar citas medicas -->
					<div class="modal fade" id="modalAppointment" tabindex="-1" aria-labelledby="modalAppointmentLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="modalAppointmentLabel">Enter Appointment</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									<form id="saveAppointment" action="{% url 'saveAppointment' obamacare.id %}" method="POST">
										{% csrf_token %}
										<div class="mb-3">
											<label for="appointment" class="form-label">Text:</label>
											<textarea class="form-control" id="appointment" name="appointment" rows="4" required></textarea>
										</div>
										<div class="mb-3">
											<label for="dateAppointment" class="form-label">Date of Appointment:</label>
											<input type="text" class="form-control" name="dateAppointment" id="dateAppointment" required >
										</div>
										<div class="mb-3">
											<label for="timeAppointment" class="form-label">Appointment Time:</label>
											<input type="time" class="form-control" name="timeAppointment" id="timeAppointment" required >
										</div>
										<button type="submit" class="btn btn-primary">Send</button>
									</form>
									
								</div>
							</div>
						</div>
					</div>

					<!-- Modal para ingresar Document -->
					<div class="modal fade" id="modalDocument" tabindex="-1" aria-labelledby="modalDocumentLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="modalIngresarTextoLabel">Upload Document</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									<div class="card">
										<div class="card-body">
											<form  method="POST" enctype="multipart/form-data">
												{% csrf_token %}
												<input type="file" id="pdfUploader" name="documents" multiple>
												<div id="fileNamesContainer"></div>												
												<button id="loadDocument" type="submit" class="btn" data-upload-url="{% url 'saveDocumentClient' obamacare.id %}" > <i class="fa-solid fa-floppy-disk"></i></button>
											</form>
										</div>
									</div>

									<div id="loader" class="loader-overlay">
										<div class="loader"></div>
										<p>Uploading files, please wait...</p>
									</div>
									
								</div>
							</div>
						</div>
					</div>
			
					<!-- Modal para ver las observaciones -->
					<div class="modal fade" id="modalVerTexto" tabindex="-1" aria-labelledby="modalVerTextoLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="modalVerTextoLabel">Saved Remarks</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									{% if obsCustomer %}
										<ul class="list-group">
											{% for observation in obsCustomer %}
												<li class="list-group-item">
													üìå <strong>{{ observation.agent }}:</strong> {{ observation.content }} <strong>Date:</strong> {{ observation.created_at }}
												</li>
											{% endfor %}
										</ul>
									{% else %}
										<p>There are no saved remarks.</p>
									{% endif %}
								</div>
							</div>
						</div>
					</div>

					<!-- Modal para ver las consent -->
					<div class="modal fade" id="verConsent" tabindex="-1" aria-labelledby="verConsentLabel" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="verConsentLabel">Saved Consent</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									{% if consent %}
										<ul class="list-group">
											{% for consents in consent %}											
												<li class="list-group-item">
													<strong>Consent #{{forloop.counter}}:</strong> <a href="{{ consents.pdf.url }} " target="_blank" >View  <i class="lni lni-display"></i></a> 
												</li>
											{% endfor %}
										</ul>
									{% else %}
										<p>No consent.</p>
									{% endif %}
								</div>
							</div>
						</div>
					</div>

					<!-- Modal para ver las Income -->
					<div class="modal fade" id="verIncomeLetter" tabindex="-1" aria-labelledby="verIncomeLetter" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="verIncomeLetter">Saved Income Letter</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									{% if income %}
										<ul class="list-group">
											{% for incomes in income %}											
												<li class="list-group-item">
													<strong>Letter Income #{{forloop.counter}}:</strong> <a href="{{ incomes.pdf.url }}" target="_blank" >View  <i class="lni lni-display"></i></a> 
												</li>
											{% endfor %}
										</ul>
									{% else %}
										<p>No Income.</p>
									{% endif %}
								</div>
							</div>
						</div>
					</div>

					<!-- Modal para ver las Document -->
					<div class="modal fade" id="verDocument" tabindex="-1" aria-labelledby="verDocument" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="verDocument">Saved documents</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									{% if document or documentObama%}
										<ul class="list-group">

											{% if document %} <h5>Documents Consent</h5> {% endif %}

											{% for documents in document %}													
												<li class="list-group-item">
													<strong>Documents Consent #{{forloop.counter}}:</strong> <a href="{{ documents.file.url }}" target="_blank" >View  <i class="lni lni-display"></i></a> 
												</li>
											{% endfor %}

											{% if document and documentObama %} <hr> {% endif %}

											{% if documentObama %} <h5>Documents Upload CRM</h5> {% endif %}

											{% for documents in documentObama %}															
												<li class="list-group-item">
													<strong>{{documents.name}}:</strong> <a href="{{ documents.file.url }}" target="_blank" >View  <i class="lni lni-display"></i></a> 
												</li>
											{% endfor %}

										</ul>
									{% else %}
										<p>No Documents.</p>
									{% endif %}
								</div>
							</div>
						</div>
					</div>

					<!-- Modal para ver las Appointment -->
					<div class="modal fade" id="verAppointment" tabindex="-1" aria-labelledby="verAppointment" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="verAppointment">Saved quotes</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									{% if apppointment %}
										<ul class="list-group">
											{% for apppointments in apppointment %}
												<li class="list-group-item">
													üìå Agent <strong>{{ apppointments.agent_create.first_name }} {{ apppointments.agent_create.last_name }}</strong> created an appointment for client <strong> {{obamacare.client.first_name}} {{obamacare.client.last_name}}  </strong> 
													for the following condition: <strong>{{ apppointments.appointment}}</strong>, on the date: <strong>{{ apppointments.dateAppointment|date:'m/d/Y'}}</strong> and at the time: <strong>{{ apppointments.timeAppointment}} </strong>
												</li>
											{% endfor %}
										</ul>
									{% else %}
										<p>There are no saved remarks.</p>
									{% endif %}
								</div>
							</div>
						</div>
					</div>

					<!-- Modal para ver los pagos -->
					<div class="modal fade" id="modalPayments" tabindex="-1" aria-labelledby="modalPayments" aria-hidden="true">
						<div class="modal-dialog">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="verAppointment">Enter Payments</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									<div class="table-responsive" >
										<table id="paymentsTable" class="table" >
											<thead>
												<tr>
													<th scope="col">Month</th>
													<th scope="col">Option</th>
												</tr>
											</thead>
											<tbody>
												{% for month in monthInEnglish %}
													<tr class="">
														<td scope="row">{{month}}</td>
														<td>
															{% if request.user.role == 'Admin' %}
																<label class="switch">
																	<input value="{{month}}" type="checkbox" {% for payMonth in monthsPaid %} {% if month == payMonth.month %}checked{% endif %}{% endfor %} >
																	<span class="slider round"></span>
																</label>
															{% else %}
																<label class="switch">
																	<input value="{{month}}" type="checkbox" {% for payMonth in monthsPaid %} {% if month == payMonth.month %}checked disabled{% endif %}{% endfor %}>
																	<span class="slider round"></span>
																</label>
															{% endif %}
														</td>
													</tr>
												{% endfor %}
											</tbody>
										</table>
									</div>
									
								</div>
							</div>
						</div>
					</div>

				</div>							
            </div>			
        </div>
    </div>
</div>

{% endblock %}
{% block end_js %}
	<!-- Bootstrap JS -->
	<script src="{% static "assets/js/bootstrap.bundle.min.js" %}"></script>
	<!--plugins-->
	<script src="{% static "assets/js/jquery.min.js" %}"></script>
	<script src="{% static "assets/plugins/simplebar/js/simplebar.min.js" %}"></script>
	<script src="{% static "assets/plugins/metismenu/js/metisMenu.min.js" %}"></script>
	<script src="{% static "assets/plugins/perfect-scrollbar/js/perfect-scrollbar.js" %}"></script>
	<script src="{% static "assets/plugins/datatable/js/jquery.dataTables.min.js" %}"></script>
	<script src="{% static "assets/plugins/datatable/js/dataTables.bootstrap5.min.js" %}"></script>


	<!-- Agregar Flatpickr -->
	<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">

	<!-- Incluir JS de Choices.js -->
	<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>

	<script src="{% static "assets/plugins/bs-stepper/js/bs-stepper.min.js" %}"></script>
	<script src="{% static "assets/plugins/bs-stepper/js/main.js" %}"></script>

	<script src="{% static "assets/js/validationZicode.js" %}"></script>

	<!--app JS-->
	<script src="{% static "assets/js/app.js" %}"></script>
	<script src="{% static "assets/js/blockSocial.js" %}"></script>

	<link href="https://unpkg.com/filepond/dist/filepond.min.css" rel="stylesheet">
	<script src="https://unpkg.com/filepond/dist/filepond.min.js"></script>
	<script src="https://unpkg.com/filepond-plugin-file-validate-type/dist/filepond-plugin-file-validate-type.min.js"></script>

	<script src="{% static "assets/js/saveDocumentObama.js" %}"></script>
	<script src="{% static 'assets/js/fetchPayments.js' %}"></script>


	<!-- Scripts Payments -->
	<script>
		var obamacare_id = '{{obamacare.id}}'
	</script>
	{% if request.user.role == 'A' %}
		<script>
			document.addEventListener('DOMContentLoaded', function () {
				var form = document.querySelector('form');
				var formElements = form.querySelectorAll('input:not([type="hidden"]), select, textarea');
		
				// Deshabilitar todos los campos del formulario excepto los de tipo 'hidden'
				formElements.forEach(function (element) {
					if (element.id !== 'id_client') {  // Aseg√∫rate de no deshabilitar 'id_client'
						element.disabled = true;
					}
				});
		
				// Manejar el div y el input de 'obs_agent'
				var divObsAgent = document.getElementById('obs_agent');
				var inputObsAgent = document.querySelector('input#obs_agent');
		
				// Condici√≥n para habilitar y mostrar el campo (modificar seg√∫n sea necesario)
				var conditionMet = /* tu l√≥gica aqu√≠ */ true; // Cambia esta l√≥gica seg√∫n lo que necesites
		
				if (conditionMet) {
					if (divObsAgent) divObsAgent.style.display = 'block'; // Mostrar el div
					if (inputObsAgent) inputObsAgent.disabled = false;    // Habilitar el input
				} else {
					if (divObsAgent) divObsAgent.style.display = 'none'; // Ocultar el div
				}
		
				// Opcional: Ocultar bot√≥n submit
				var submitButton = form.querySelector('button[id="enviar"]');
				var submitButton2 = form.querySelector('button[id="enviar2"]');
				if (submitButton && submitButton2) {
					submitButton.style.display = 'none';     // Oculta el primer bot√≥n submit
					submitButton2.style.display = 'inline';  // Muestra el segundo bot√≥n submit
				}
			});
		</script>	
	{% endif %} 
	
	<script>
		document.addEventListener('DOMContentLoaded', function() {

			let limit = parseInt('{{ c }}');
			//console.log(limit); // Ahora es un n√∫mero

			if (limit < 6){
				Swal.fire({
				title: "Action required.",
				width: 500,
				padding: "2em",
				icon:"error",
				html: `
					{% if not letterCard.letters %} <p style="line-height: 0.6;">‚ùå <b>Letters</b> </p> {% endif %}
					{% if not letterCard.card %} <p style="line-height: 0.6;"> ‚ùå <b>Card</b> </p>  {% endif %}
					{% if not userCarrier.username_carrier %} <p style="line-height: 0.6;">‚ùå <b>Username Carrier</b> </p>  {% endif %}				
					{% if not obamacare.status == 'ACTIVE'  %} <p style="line-height: 0.6;">‚ùå <b>Status</b> </p>  {% endif %}
					{% if not obamacare.doc_migration %} <p style="line-height: 0.6;">‚ùå <b>Migration Document</b> </p>  {% endif %}
					{% if not obamacare.doc_income %} <p style="line-height: 0.6;">‚ùå <b>Income Document</b> </p>  {% endif %}
					{% if obamacare.policyNumber == '' or obamacare.policyNumber == Null or obamacare.policyNumber == 'None'  %}  <p style="line-height: 0.6;">‚ùå <b>Policy Number</b> </p>  {% endif %}
					{% if not apppointment %} <p style="line-height: 0.6;">‚ùå <b>Apppointment</b> </p>  {% endif %}
					
				`,
				confirmButtonColor: "#3085d6",
				confirmButtonText: "OK",
				background: "#fff url(https://sweetalert2.github.io/images/trees.png)",
				backdrop: `	rgba(255,0,0,0.28)`
				});

			}

			const selectElement = document.querySelector('#textoIngresados');
			const choices = new Choices(selectElement, {
				removeItemButton: true,  // Muestra el bot√≥n de eliminar las opciones seleccionadas
				searchEnabled: true,     // Habilita la b√∫squeda en el men√∫ desplegable
				placeholderValue: 'Seleccione una opci√≥n...',
				itemSelectText: '',      // Elimina el texto 'Selecciona un elemento'
			});
			//formateo de la fecha
			flatpickr("#date_birth", {dateFormat: "m/d/Y", });
			flatpickr("[id^='dateBirthDependent']", {dateFormat: "m/d/Y",  }); 
			flatpickr("#date_bearing", {dateFormat: "m/d/Y",  }); 
			flatpickr("#date_effective_coverage", {dateFormat: "m/d/Y",  }); 
			flatpickr("#date_effective_coverage_end", {dateFormat: "m/d/Y",  });
			flatpickr("#dateAppointment", {dateFormat: "m/d/Y",  });  

			document.getElementById('saveAppointment').addEventListener('submit', function(event) {
				const dateInput = document.getElementById('dateAppointment');
				if (!dateInput.value) {
					event.preventDefault();
					Swal.fire({
						icon: 'error',
						title: 'Error',
						text: 'Por favor, selecciona una fecha.',
					});
				}
			});
		});	
	</script>
	

{% endblock %}